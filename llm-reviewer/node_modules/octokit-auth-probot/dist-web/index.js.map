{
  "version": 3,
  "sources": ["../dist-src/auth.js", "../dist-src/get-state.js", "../dist-src/version.js", "../dist-src/index.js"],
  "sourcesContent": ["import { createUnauthenticatedAuth } from \"@octokit/auth-unauthenticated\";\nasync function auth(state, options) {\n  if (options.type !== \"event-octokit\") {\n    if (state.type === \"token\" && options.type === \"installation\" && options.factory) {\n      const { type, factory, ...factoryAuthOptions } = options;\n      return factory(\n        Object.assign({}, factoryAuthOptions, {\n          octokit: state.octokit,\n          octokitOptions: state.octokitOptions\n        })\n      );\n    }\n    return state.auth(options);\n  }\n  if (state.type !== \"app\") {\n    return state.octokit;\n  }\n  const action = options.event.payload.action;\n  const installationId = options.event.payload.installation && options.event.payload.installation.id;\n  const fullEventName = options.event.name + (action ? \".\" + action : \"\");\n  const OctokitWithEventAuth = state.octokit.constructor;\n  if (!installationId) {\n    const { auth: auth2, ...octokitOptions } = state.octokitOptions;\n    return new OctokitWithEventAuth({\n      authStrategy: createUnauthenticatedAuth,\n      auth: {\n        reason: `Handling a \"${fullEventName}\" event: an \"installation\" key is missing. The installation ID cannot be determined`\n      },\n      ...octokitOptions\n    });\n  }\n  if (options.event.name === \"installation\" && [\"suspend\", \"deleted\"].includes(String(action))) {\n    const { auth: auth2, ...octokitOptions } = state.octokitOptions;\n    return new OctokitWithEventAuth({\n      authStrategy: createUnauthenticatedAuth,\n      auth: {\n        reason: `Handling a \"${fullEventName}\" event: The app's access has been revoked from @octokit (id: ${installationId})`\n      },\n      ...octokitOptions\n    });\n  }\n  return state.auth({\n    type: \"installation\",\n    installationId,\n    factory: (auth2) => {\n      const options2 = Object.assign({}, state.octokitOptions, {\n        auth: Object.assign({}, auth2, {\n          installationId\n        })\n      });\n      return new OctokitWithEventAuth(options2);\n    }\n  });\n}\nexport {\n  auth\n};\n", "import { createTokenAuth } from \"@octokit/auth-token\";\nimport { createAppAuth } from \"@octokit/auth-app\";\nimport { createUnauthenticatedAuth } from \"@octokit/auth-unauthenticated\";\nfunction getState(options) {\n  const common = {\n    octokit: options.octokit,\n    octokitOptions: options.octokitOptions\n  };\n  if (\"token\" in options) {\n    return {\n      type: \"token\",\n      auth: createTokenAuth(String(options.token)),\n      ...common\n    };\n  }\n  if (\"appId\" in options && \"privateKey\" in options) {\n    return {\n      type: \"app\",\n      auth: createAppAuth(options),\n      ...common\n    };\n  }\n  return {\n    type: \"unauthenticated\",\n    auth: createUnauthenticatedAuth({\n      reason: `Neither \"appId\"/\"privateKey\" nor \"token\" have been set as auth options`\n    }),\n    ...common\n  };\n}\nexport {\n  getState\n};\n", "const VERSION = \"0.0.0-development\";\nexport {\n  VERSION\n};\n", "import { auth } from \"./auth.js\";\nimport { getState } from \"./get-state.js\";\nimport { VERSION } from \"./version.js\";\nfunction createProbotAuth(options) {\n  const state = getState(options);\n  return Object.assign(auth.bind(null, state), {\n    hook: state.auth.hook\n  });\n}\ncreateProbotAuth.VERSION = VERSION;\nexport {\n  createProbotAuth\n};\n"],
  "mappings": ";AAAA,SAAS,iCAAiC;AAC1C,eAAe,KAAK,OAAO,SAAS;AAClC,MAAI,QAAQ,SAAS,iBAAiB;AACpC,QAAI,MAAM,SAAS,WAAW,QAAQ,SAAS,kBAAkB,QAAQ,SAAS;AAChF,YAAM,EAAE,MAAM,SAAS,GAAG,mBAAmB,IAAI;AACjD,aAAO;AAAA,QACL,OAAO,OAAO,CAAC,GAAG,oBAAoB;AAAA,UACpC,SAAS,MAAM;AAAA,UACf,gBAAgB,MAAM;AAAA,QACxB,CAAC;AAAA,MACH;AAAA,IACF;AACA,WAAO,MAAM,KAAK,OAAO;AAAA,EAC3B;AACA,MAAI,MAAM,SAAS,OAAO;AACxB,WAAO,MAAM;AAAA,EACf;AACA,QAAM,SAAS,QAAQ,MAAM,QAAQ;AACrC,QAAM,iBAAiB,QAAQ,MAAM,QAAQ,gBAAgB,QAAQ,MAAM,QAAQ,aAAa;AAChG,QAAM,gBAAgB,QAAQ,MAAM,QAAQ,SAAS,MAAM,SAAS;AACpE,QAAM,uBAAuB,MAAM,QAAQ;AAC3C,MAAI,CAAC,gBAAgB;AACnB,UAAM,EAAE,MAAM,OAAO,GAAG,eAAe,IAAI,MAAM;AACjD,WAAO,IAAI,qBAAqB;AAAA,MAC9B,cAAc;AAAA,MACd,MAAM;AAAA,QACJ,QAAQ,eAAe,aAAa;AAAA,MACtC;AAAA,MACA,GAAG;AAAA,IACL,CAAC;AAAA,EACH;AACA,MAAI,QAAQ,MAAM,SAAS,kBAAkB,CAAC,WAAW,SAAS,EAAE,SAAS,OAAO,MAAM,CAAC,GAAG;AAC5F,UAAM,EAAE,MAAM,OAAO,GAAG,eAAe,IAAI,MAAM;AACjD,WAAO,IAAI,qBAAqB;AAAA,MAC9B,cAAc;AAAA,MACd,MAAM;AAAA,QACJ,QAAQ,eAAe,aAAa,iEAAiE,cAAc;AAAA,MACrH;AAAA,MACA,GAAG;AAAA,IACL,CAAC;AAAA,EACH;AACA,SAAO,MAAM,KAAK;AAAA,IAChB,MAAM;AAAA,IACN;AAAA,IACA,SAAS,CAAC,UAAU;AAClB,YAAM,WAAW,OAAO,OAAO,CAAC,GAAG,MAAM,gBAAgB;AAAA,QACvD,MAAM,OAAO,OAAO,CAAC,GAAG,OAAO;AAAA,UAC7B;AAAA,QACF,CAAC;AAAA,MACH,CAAC;AACD,aAAO,IAAI,qBAAqB,QAAQ;AAAA,IAC1C;AAAA,EACF,CAAC;AACH;;;ACrDA,SAAS,uBAAuB;AAChC,SAAS,qBAAqB;AAC9B,SAAS,6BAAAA,kCAAiC;AAC1C,SAAS,SAAS,SAAS;AACzB,QAAM,SAAS;AAAA,IACb,SAAS,QAAQ;AAAA,IACjB,gBAAgB,QAAQ;AAAA,EAC1B;AACA,MAAI,WAAW,SAAS;AACtB,WAAO;AAAA,MACL,MAAM;AAAA,MACN,MAAM,gBAAgB,OAAO,QAAQ,KAAK,CAAC;AAAA,MAC3C,GAAG;AAAA,IACL;AAAA,EACF;AACA,MAAI,WAAW,WAAW,gBAAgB,SAAS;AACjD,WAAO;AAAA,MACL,MAAM;AAAA,MACN,MAAM,cAAc,OAAO;AAAA,MAC3B,GAAG;AAAA,IACL;AAAA,EACF;AACA,SAAO;AAAA,IACL,MAAM;AAAA,IACN,MAAMA,2BAA0B;AAAA,MAC9B,QAAQ;AAAA,IACV,CAAC;AAAA,IACD,GAAG;AAAA,EACL;AACF;;;AC7BA,IAAM,UAAU;;;ACGhB,SAAS,iBAAiB,SAAS;AACjC,QAAM,QAAQ,SAAS,OAAO;AAC9B,SAAO,OAAO,OAAO,KAAK,KAAK,MAAM,KAAK,GAAG;AAAA,IAC3C,MAAM,MAAM,KAAK;AAAA,EACnB,CAAC;AACH;AACA,iBAAiB,UAAU;",
  "names": ["createUnauthenticatedAuth"]
}
